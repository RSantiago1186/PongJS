<!doctype html>
<html>
<body onload="startBall()">
<div id="paddle1"  style="position:absolute;left:0px;top:460px;width:10px;height:150px;background-color:black;">
</div>
<div id="ball"  style="position:absolute;left:820px;top:510px;width:25px;height:25px;background-color:red;border-radius:50%;">
</div>
<div id="paddle2"  style="position:absolute;right:0px;top:460px;width:10px;height:150px;background-color:black;">
</div>
</body>
<script>
var paddleHeight = 150;
var paddleWidth = 10;
var ballRadius = 25;
var halfPaddleHeight = paddleHeight / 2;
var speedOfPaddle1 = 0;
var positionOfPaddle1 = 460;
var speedOfPaddle2 = 0;
var positionOfPaddle2 = 460;
var topPositionOfBall = 510;
var leftPositionOfBall = 820;
var topSpeedOfBall = 0;
var leftSpeedOfBall = 0;
var score1 = 0;
var score2 = 0;
// Ball starts moving at beginning of game randomly
function startBall() {
	topPositionOfBall = 510;
	leftPositionOfBall = 820;
	if (Math.random() < 0.5) {
		var side = 1
	} else {
		var side = -1
	}
	topSpeedOfBall = Math.random() * 2 + 3;
	leftSpeedOfBall = side * (Math.random() * 2 + 3);
};
// Move paddles when following keys pressed
document.addEventListener('keydown', function (e) {
     if (e.keyCode == 87 || e.which == 87) { // W key movement
      speedOfPaddle1 = -10;
     }
     if (e.keyCode == 83 || e.which == 83) { // S Key movement
      speedOfPaddle1 = 10;
     }
     if (e.keyCode == 38 || e.which == 38) { // Up arrow movement
      speedOfPaddle2 = -10;
     }
     if (e.keyCode == 40 || e.which == 40) { // Down arrow movement
      speedOfPaddle2 = 10;
     }
}, false);
// Stop movement of paddles when key lifted
document.addEventListener('keyup', function (e) {
	if (e.keyCode == 87 || e.which == 87) { // W key stops upon release instead of going off screen.
		speedOfPaddle1 = 0;
	}
	if (e.keyCode == 83 || e.which == 83) { // S key stops upon release instead of going off screen.
		speedOfPaddle1 = 0;
	}
	if (e.keyCode == 38 || e.which == 38) { // Up arrow stops upon release instead of going off screen.
		speedOfPaddle2 = 0;
	}
	if (e.keyCode == 40 || e.which == 40) { // Down arrow stops upon release instead of going off screen.
		speedOfPaddle2 = 0;
	}
}, false);
function print() {
	console.log(positionOfPaddle1);
}
// Speed of paddles (Adjustable)
window.setInterval(function show() {
	positionOfPaddle1 += speedOfPaddle1;
	positionOfPaddle2 += speedOfPaddle2;
	topPositionOfBall += topSpeedOfBall;
	leftPositionOfBall += leftSpeedOfBall;
	if (positionOfPaddle1 <= 150) { // Cap on paddle-1 so it doesnt go off screen
		positionOfPaddle1 = 150;
	}
	if (positionOfPaddle2 <= 150) { // Cap on paddle-2 so it doesnt go off screen
		positionOfPaddle2 = 150;
	}
	if (positionOfPaddle1 >= window.innerHeight - paddleHeight) {
		positionOfPaddle1 = window.innerHeight - paddleHeight;
	}
	if (positionOfPaddle2 > window.innerHeight - paddleHeight) {
		positionOfPaddle2 = window.innerHeight - paddleHeight;
	}
// wall bounce
	if (topPositionOfBall <= 150 || topPositionOfBall >= window.innerHeight - ballRadius) {
		topSpeedOfBall = -topSpeedOfBall
	}
// Speed of ball adjusts with each paddle hit and add wall bounce
	if (leftPositionOfBall <= paddleWidth) {
		if (topPositionOfBall > positionOfPaddle1 && topPositionOfBall < positionOfPaddle1 + paddleHeight) {
			leftSpeedOfBall = -leftSpeedOfBall;
		} else {
			startBall();
		}
	}
	if (leftPositionOfBall >= window.innerWidth - ballRadius - paddleWidth) {
		if (topPositionOfBall > positionOfPaddle2 && topPositionOfBall < positionOfPaddle2 + paddleHeight) {
			leftSpeedOfBall = -leftSpeedOfBall
		} else {
			startBall();
		}
	}
	document.getElementById("paddle1").style.top = (positionOfPaddle1) + "px";
	document.getElementById("paddle2").style.top = (positionOfPaddle2) + "px";
	document.getElementById("ball").style.top = (topPositionOfBall) + "px";
	document.getElementById("ball").style.left = (leftPositionOfBall) + "px";
}, 1000/60);
</script>